<div class="h-screen w-screen bg-gradient-to-br overflow-hidden">
  <!-- Top Navigation Bar -->
  <div class="h-16 backdrop-blur-sm relative bg-black/80">
    <!-- <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div
        class="absolute -top-1/8 -left-1/2 w-full h-full bg-gradient-to-br from-purple-500/10 to-blue-500/10 rounded-full blur-3xl"
      ></div>
      <div
        class="absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-to-tl from-blue-500/10 rounded-full blur-3xl"
      ></div> -->
    <!-- </div> -->
    <div class="flex items-center justify-between h-full px-6">
      <div class="flex items-center gap-4">
        <span
          class="text-xl font-bold text-white flex items-center gap-2 bg-black/80"
        >
          <span class="w-8 h-8 rounded-lg flex items-center justify-center">
            ‚ö°
          </span>
          Query Dashboard
        </span>

        <!-- Quick Stats -->
        <div class="flex items-center gap-4 ml-8 bg-black/80">
          <div class="flex items-center gap-2 text-sm">
            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
            <span class="text-slate-300">Connected</span>
          </div>
          <div class="text-sm text-slate-400">
            Database:
            <span class="text-indigo-400">{{ mockStats.database }}</span>
          </div>
          <div class="text-sm text-slate-400">
            Queries Today:
            <span class="text-green-400">{{ mockStats.queriestoday }}</span>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex items-center gap-3">
        <button class="dashboard-btn" (click)="exportResults()">Export</button>
        <button class="dashboard-btn" (click)="saveQuery()">Save Query</button>
        <button class="dashboard-btn primary" (click)="newQuery()">
          New Query
        </button>
      </div>
    </div>
  </div>

  <div class="h-[calc(100vh-4rem)] flex bg-black/80">
    <!-- Left Sidebar -->
    <div
      class="w-80 flex flex-col relative bg-black/80 border-r border-b border-white/10"
    >
      <!-- <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div
          class="absolute -top-1/4 -bottom-1/1 w-full h-full bg-gradient-to-br from-purple-500/10 to-black/10 rounded-full blur-3xl"
        ></div>
        <div
          class="absolute -bottom-1/12 -right-1/1 w-full h-full bg-gradient-to-tl from-black/10 rounded-full blur-3xl"
        ></div>
      </div> -->
      <!-- Schema Explorer Section -->
      <div class="flex-1 min-h-0 border-b border-white/10">
        <div class="h-64 overflow-y-auto">
          <app-schema-tree [schemaTree]="schemaExplorer()"></app-schema-tree>
        </div>
      </div>

      <!-- Query History -->
      <div class="">
        <div class="p-4">
          <span
            class="text-sm font-semibold text-slate-300 mb-3 flex items-center justify-between"
          >
            Recent Queries
            <button class="text-xs text-indigo-400 hover:text-indigo-300">
              View All
            </button>
          </span>
          <div class="space-y-2 max-h-40 overflow-y-auto">
            <div
              *ngFor="let query of mockRecentQueries"
              class="p-2 bg-slate-700/30 rounded-lg cursor-pointer hover:bg-slate-700/50 transition-colors"
              (click)="loadQuery(query)"
            >
              <div class="text-xs text-slate-300 truncate">
                {{ query.title }}
              </div>
              <div class="text-xs text-slate-500 mt-1">{{ query.time }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Favorites -->
      <div class="bg-black/80">
        <div class="p-4">
          <h3
            class="text-sm font-semibold text-slate-300 mb-3 flex items-center gap-2"
          >
            Favorites
          </h3>
          <div class="space-y-1">
            <div
              *ngFor="let fav of mockFavorites"
              class="text-xs text-slate-400 hover:text-slate-300 cursor-pointer py-1"
              (click)="loadQuery(fav)"
            >
              {{ fav.name }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content Area -->
    <div
      class="flex-1 flex flex-col bg-gradient-to-br from-black/80 to-black/60"
    >
      <!-- Query Toolbar -->
      <div class="h-12 flex items-center justify-between px-4 bg-black/80">
        <div class="flex items-center gap-3 bg-black/80">
          <select
            class="text-slate-300 text-sm px-3 py-1 rounded border border-slate-600"
          >
            <option>SQL Query</option>
            <option>Stored Procedure</option>
            <option>View Definition</option>
          </select>

          <div class="flex items-center gap-2 bg-black/80">
            <button class="toolbar-btn" title="Run Query">‚ñ∂Ô∏è</button>
            <button class="toolbar-btn" title="Explain Plan">üìã</button>
            <button class="toolbar-btn" title="Format SQL">üí°</button>
            <button class="toolbar-btn" title="Query Performance">‚è±Ô∏è</button>
          </div>
        </div>

        <div class="flex items-center gap-3 bg-black/80">
          <!-- Performance Indicator -->
          <div class="flex items-center gap-2 text-xs">
            <span class="text-slate-400">Last Query:</span>
            <span class="text-green-400">{{ mockStats.lastQueryTime }}ms</span>
          </div>

          <!-- View Toggle -->
          <div class="flex items-center bg-slate-700 rounded-lg p-1">
            <button
              class="text-xs px-2 py-1 rounded transition-colors"
              [class.bg-indigo-600]="activeView === 'raw'"
              [class.text-white]="activeView === 'raw'"
              [class.text-slate-400]="activeView !== 'raw'"
              (click)="setView('raw')"
            >
              üìÑ Raw
            </button>
            <button
              class="text-xs px-2 py-1 rounded transition-colors"
              [class.bg-indigo-600]="activeView === 'diagram'"
              [class.text-white]="activeView === 'diagram'"
              [class.text-slate-400]="activeView !== 'diagram'"
              (click)="setView('diagram')"
            >
              üìä Diagram
            </button>
          </div>
        </div>
      </div>

      <!-- Main Work Area -->
      <div class="flex-1 flex" [ngSwitch]="activeView">
        <!-- Raw View (IDE) -->
        <div *ngSwitchCase="'raw'" class="flex-1">
          <nz-splitter nzLayout="horizontal" class="h-full">
            <nz-splitter-panel nzDefaultSize="60%">
              <div class="h-full">
                <app-results-ide></app-results-ide>
              </div>
            </nz-splitter-panel>
            <nz-splitter-panel nzDefaultSize="40%">
              <nz-splitter nzLayout="vertical" class="h-full">
                <nz-splitter-panel nzDefaultSize="100%">
                  <app-ai-gen></app-ai-gen>
                </nz-splitter-panel>
              </nz-splitter>
            </nz-splitter-panel>
          </nz-splitter>
        </div>

        <!-- Diagram View -->
        <div *ngSwitchCase="'diagram'" class="flex-1">
          <nz-splitter nzLayout="horizontal" class="h-full">
            <nz-splitter-panel nzDefaultSize="60%">
              <div
                class="h-full rounded-lg border flex items-center justify-center required:bg-gradient-to-br from-black/80 to-black/60"
              >
                <div class="text-center">
                  <div class="text-6xl mb-4">üìä</div>
                  <h3 class="text-xl font-semibold text-slate-300 mb-2">
                    Database Schema Diagram
                  </h3>
                  <p class="text-slate-400 mb-6">
                    Visual representation of your database structure
                  </p>

                  <!-- Mock Diagram Preview -->
                  <div class="bg-slate-800/50 rounded-lg p-8 max-w-2xl mx-auto">
                    <div class="grid grid-cols-3 gap-6">
                      <!-- Table 1 -->
                      <div
                        class="bg-gradient-to-br from-blue-600/20 to-blue-700/20 border border-blue-500/30 rounded-lg p-4"
                      >
                        <div class="text-blue-300 font-semibold mb-2">
                          üë• users
                        </div>
                        <div class="text-xs text-slate-400 space-y-1">
                          <div>id (PK)</div>
                          <div>email</div>
                          <div>name</div>
                          <div>created_at</div>
                        </div>
                      </div>

                      <!-- Table 2 -->
                      <div
                        class="bg-gradient-to-br from-green-600/20 to-green-700/20 border border-green-500/30 rounded-lg p-4"
                      >
                        <div class="text-green-300 font-semibold mb-2">
                          üì¶ orders
                        </div>
                        <div class="text-xs text-slate-400 space-y-1">
                          <div>id (PK)</div>
                          <div>user_id (FK)</div>
                          <div>amount</div>
                          <div>status</div>
                          <div>order_date</div>
                        </div>
                      </div>

                      <!-- Table 3 -->
                      <div
                        class="bg-gradient-to-br from-purple-600/20 to-purple-700/20 border border-purple-500/30 rounded-lg p-4"
                      >
                        <div class="text-purple-300 font-semibold mb-2">
                          üõçÔ∏è products
                        </div>
                        <div class="text-xs text-slate-400 space-y-1">
                          <div>id (PK)</div>
                          <div>name</div>
                          <div>price</div>
                          <div>category_id (FK)</div>
                        </div>
                      </div>
                    </div>

                    <!-- Relationship Lines -->
                    <div
                      class="mt-6 flex justify-center items-center space-x-4"
                    >
                      <div class="text-xs text-slate-500">Relationships:</div>
                      <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                        <div class="w-8 h-0.5 bg-slate-600"></div>
                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                        <div class="text-xs text-slate-500">users ‚Üí orders</div>
                      </div>
                    </div>
                  </div>

                  <div class="mt-6 flex justify-center space-x-3">
                    <button class="dashboard-btn text-xs">Export PNG</button>
                    <button class="dashboard-btn text-xs">Export SVG</button>
                    <button class="dashboard-btn primary text-xs">
                      Generate Full Diagram
                    </button>
                  </div>
                </div>
              </div>
            </nz-splitter-panel>
            <nz-splitter-panel nzDefaultSize="40%">
              <nz-splitter nzLayout="vertical" class="h-full">
                <nz-splitter-panel nzDefaultSize="100%">
                  <app-ai-gen></app-ai-gen>
                </nz-splitter-panel>
              </nz-splitter>
            </nz-splitter-panel>
          </nz-splitter>
        </div>
      </div>
    </div>

    <!-- Right Analytics Panel -->
    <div
      class="w-72 border-l border-slate-700 flex flex-col bg-black/80 relative"
      *ngIf="showAnalytics"
    >
      <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div
          class="absolute top-1/8 left-1/2 w-full h-full bg-gradient-to-br from-purple-500/10 to-blue-500/10 rounded-full blur-3xl"
        ></div>
        <div
          class="absolute bottom-1/2 right-1/2 w-full h-full bg-gradient-to-tl from-blue-500/10 rounded-full blur-3xl"
        ></div>
      </div>
      <!-- Query Performance -->
      <div class="p-4 border-b border-slate-700">
        <h3
          class="text-sm font-semibold text-slate-300 mb-3 flex items-center gap-2"
        >
          üìà Performance
        </h3>
        <div class="space-y-3">
          <div class="bg-slate-700/30 rounded-lg p-3">
            <div class="text-xs text-slate-400">Execution Time</div>
            <div class="text-lg font-bold text-green-400">
              {{ mockStats.lastQueryTime }}ms
            </div>
          </div>
          <div class="bg-slate-700/30 rounded-lg p-3">
            <div class="text-xs text-slate-400">Rows Returned</div>
            <div class="text-lg font-bold text-blue-400">
              {{ mockStats.rowsReturned }}
            </div>
          </div>
          <div class="bg-slate-700/30 rounded-lg p-3">
            <div class="text-xs text-slate-400">Memory Usage</div>
            <div class="text-lg font-bold text-purple-400">
              {{ mockStats.memoryUsage }}
            </div>
          </div>
        </div>
      </div>

      <!-- Query Suggestions -->
      <div class="p-4 border-b border-slate-700">
        <h3
          class="text-sm font-semibold text-slate-300 mb-3 flex items-center gap-2"
        >
          üí° Suggestions
        </h3>
        <div class="space-y-2">
          <div
            *ngFor="let suggestion of mockSuggestions"
            class="p-2 bg-slate-700/30 rounded text-xs text-slate-300 hover:bg-slate-700/50 cursor-pointer transition-colors"
            (click)="applySuggestion(suggestion)"
          >
            {{ suggestion.text }}
          </div>
        </div>
      </div>

      <!-- Database Stats -->
      <div class="flex-1 p-4">
        <h3
          class="text-sm font-semibold text-slate-300 mb-3 flex items-center gap-2"
        >
          üìä Database Stats
        </h3>
        <div class="space-y-2 text-xs">
          <div class="flex justify-between">
            <span class="text-slate-400">Total Tables</span>
            <span class="text-slate-300">{{ mockStats.totalTables }}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-slate-400">Active Connections</span>
            <span class="text-slate-300">{{
              mockStats.activeConnections
            }}</span>
          </div>
          <div class="flex justify-between">
            <span class="text-slate-400">Cache Hit Rate</span>
            <span class="text-green-400">{{ mockStats.cacheHitRate }}%</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
